### 2021-06-01

- [ ] /kis9a /src top page animation <https://github.com/liabru/matter-js>
- [ ] build a dependency file lists and draw graphical animation like obsstrin.
- [ ] go + nginx <https://github.com/unokun/go-todo-api>
- [ ] go as CGI + nginx -> go as microservice. docker, kubernetes.
      <https://github.com/hashicorp/terraform-exec/blob/main/.github/dependabot.yml>
- [ ] code reading esbuild <https://github.com/evanw/esbuild/> how to html, css, js, scss.
- [ ] write string to file without duplicate line bash.
- [x] check can click evnt input event in terminal in ssh.
- [ ] go-minify html, css, javascript, whitespace.
      <https://github.com/luncheon/typescript-build-tools-comparison.git>
- [x] ~~/error log top level change and return err.~~
      â¬† - [ ] commander.Command.Run method's error log is subtle, fork and fix. private.
- [x] /infrabuilder directory structure changed /infrabuilder/ web/...|infra/ cmd|envs|modules
- [x] /infrabuilder environment reference with struct. and change variables name.
- [ ] read [esbuild/architecture.md at master Â· evanw/esbuild Â· GitHub](https://github.com/evanw/esbuild/blob/master/docs/architecture.md){{{

  esbuild å˜ä½“ã§ãƒˆãƒ©ãƒ³ã‚¹ãƒ‘ã‚¤ãƒ« + ãƒãƒ³ãƒ‰ãƒ« + ãƒŸãƒ‹ãƒ•ã‚¡ã‚¤ã§ãã¾ã™

- Architecture

  - Design principles

- **Maximize parallelism**
- **Avoid doing unnecessary work**
- **Transparently support both ES6 and CommonJS module syntax**
- **Try to do as few full-AST passes as possible for better cache locality**
  1. Lexing + parsing + scope setup + symbol declaration
  2. Symbol binding + constant folding + syntax lowering + syntax mangling
  3. Printing + source map generation
- **Structure things to permit a "watch mode" where compilation can happen incrementally**

- Overview
  - Scan phase
  - Compile phase
- Notes about parsing
  - Symbols and scopes
  - Constant folding
  - TypeScript parsing
- Notes about linking
  - CommonJS linking
  - ES6 linking
  - Hybrid CommonJS and ES6 modules
  - Scope hoisting
  - Converting ES6 imports to CommonJS imports
  - The runtime library
  - Tree shaking
  - Code splitting
- Notes about printing
- Symbol minification

<!--}}}-->

- [x] /infrabuilder destroy confirmation.
- [ ] /infrabuilder terraform module clean up and fix.
- [ ] /infrabuilder create draft server and setup with ansible.
- [ ] /infrabuilder verification works in draft server.
- [ ] /infrabuilder terraform lifecycle.
- [ ] /infrabuilder cmd_fx

### 2021-06-02

```<!--{{{-->
package main

import (
 "strings"

 "github.com/gdamore/tcell/v2"
 "github.com/gonuts/commander"
 "github.com/rivo/tview"
)

func makeCmdUpdate() *commander.Command {
 cmdUpdate := func(cmd *commander.Command, args []string) error {
  var err error
  // app := tview.NewApplication()

  // b := tview.NewTextView()
  // b.SetText("textarea(b)")
  // b.SetTitle("title(b)").
  //  SetBorder(true)

  // c := tview.NewTextView()
  // c.SetText("textarea(c)")
  // c.SetTitle("title(c)").
  //  SetTitleAlign(tview.AlignRight).
  //  SetBorder(true)

  // flex := tview.NewFlex().
  //  AddItem(b, 0, 1, false).
  //  AddItem(c, 0, 1, false)

  // if err := app.SetRoot(flex, true).Run(); err != nil {
  //  panic(err)
  // }

  app := tview.NewApplication()
  table := tview.NewTable().
   SetBorders(true)
  lorem := strings.Split("Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.", " ")
  cols, rows := 10, 40
  word := 0
  for r := 0; r < rows; r++ {
   for c := 0; c < cols; c++ {
    color := tcell.ColorWhite
    if c < 1 || r < 1 {
     color = tcell.ColorYellow
    }
    table.SetCell(r, c,
     tview.NewTableCell(lorem[word]).
      SetTextColor(color).
      SetAlign(tview.AlignCenter))
    word = (word + 1) % len(lorem)
   }
  }
  table.Select(0, 0).SetFixed(1, 1).SetDoneFunc(func(key tcell.Key) {
   if key == tcell.KeyEscape {
    app.Stop()
   }
   if key == tcell.KeyEnter {
    table.SetSelectable(true, true)
   }
  }).SetSelectedFunc(func(row int, column int) {
   table.GetCell(row, column).SetTextColor(tcell.ColorRed)
   table.SetSelectable(false, false)
  })
  if err := app.SetRoot(table, true).EnableMouse(true).Run(); err != nil {
   panic(err)
  }

  return err
 }

 return &commander.Command{
  Run:       cmdUpdate,
  UsageLine: "update",
  Short:     "Update",
 }
}

// judge preset.
// write env.json diff preset.json and new_input.json
```

<!--}}}-->

- MangaDex v5's API.
- [GitHub - darylhjd/mangadesk: Terminal client for MangaDex ğŸ“–](https://github.com/darylhjd/mangadesk)
- [Terraform ã‹ã‚‰ Ansible ã® playbook ã‚’å®Ÿè¡Œã™ã‚‹ - Qiita](https://qiita.com/hayaosato/items/ee0d6eabb7b3d0a22136)
- [ ] try ansible module.

<!--{{{-->

- [Ansible ã® user ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€yum ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€service ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«](https://zenn.dev/suiudou/articles/0498fe850499b0)
- [Ansible ã® file ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€copy ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€template ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«](https://zenn.dev/suiudou/articles/57354e5606224c)
  | ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | æ„å‘³ |
  | ----------- | --------------------------------------------------------------------------------------------------------------------------------- |
  | name | playbook ã®æ¦‚è¦ã‚’è¨˜è¿°ã€‚æ—¥æœ¬èª OK |
  | remote_user | ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒãƒ¼ãƒ‰ã‹ã‚‰ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒãƒ¼ãƒ‰ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’æŒ‡å®šã™ã‚‹ã€‚Ansible-playbook ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ã‚ã‚Œã°ä¸è¦ã€‚ |
  | hosts | Inventory ãƒ•ã‚¡ã‚¤ãƒ«ã§ä½œæˆã—ãŸã‚°ãƒ«ãƒ¼ãƒ—ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚å…¨ã¦ã®ã‚°ãƒ«ãƒ¼ãƒ—ã«é©ç”¨ã•ã›ãŸã„ã¨ãã¯ all ã¨æŒ‡å®šã™ã‚‹ã€‚ |
  | become | ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒãƒ¼ãƒ‰ã§ root ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ãªã‚‹ã‹ã©ã†ã‹ã€‚true ã¨æŒ‡å®šã™ã‚‹ã€‚ |

| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿    | æ„å‘³                                                                                                                                 |
| ------------- | ------------------------------------------------------------------------------------------------------------------------------------ |
| tasks         | å‡¦ç†å†…å®¹ã¯ tasks ä»¥ä¸‹ã«å…¥ã‚Œå­ã§å†…å®¹ã‚’è¨˜è¿°ã™ã‚‹ã€‚                                                                                      |
| name(å…ˆé ­)    | å‡¦ç†å†…å®¹ã®èª¬æ˜ã‚’è¨˜è¿°(æ—¥æœ¬èª OK)                                                                                                      |
| yum           | yum ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€‚yum ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã®å‡¦ç†å†…å®¹ã¯ä»¥é™å…¥ã‚Œå­ã§è¨˜è¿°ã™ã‚‹                                                                     |
| yum/name      | yum ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã‚’æŒ‡å®šã™ã‚‹ã€‚                                                                             |
| yum/state     | yum ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã¯ present ã§ã¯å°å…¥,latest ãªã‚‰æœ€æ–°ç‰ˆã«æ›´æ–°,adsent ãªã‚‰å‰Šé™¤ã‚’è¡Œã†                                                    |
| template      | template ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€‚Jinja2 ã¨ã„ã†ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚¨ãƒ³ã‚¸ãƒ³ã§ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ©ç”¨ã—ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã¦ãƒªãƒ¢ãƒ¼ãƒˆé€ä¿¡ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ |
| template/src  | ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ãƒ‘ã‚¹ã‚’æŒ‡å®šã™ã‚‹ã€‚ç›¸å¯¾ãƒ‘ã‚¹ã¾ãŸã¯çµ¶å¯¾ãƒ‘ã‚¹                                                                                 |
| template/dest | é€ã‚Šå…ˆã®ãƒªãƒ¢ãƒ¼ãƒˆã®ãƒ•ã‚¡ã‚¤ãƒ«åã‚’æŒ‡å®šã™ã‚‹                                                                                               |

| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | æ„å‘³                                                                                                                              |
| ---------- | --------------------------------------------------------------------------------------------------------------------------------- |
| name       | â€»å¿…é ˆé …ç›®ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®åå‰ã‚’æŒ‡å®šã™ã‚‹ã€‚                                                                                             |
| password   | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’è¨­å®šã™ã‚‹ã€‚                                                                                                  |
| state      | present:ãƒ¦ãƒ¼ã‚¶ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹ã€‚absent:ãƒ¦ãƒ¼ã‚¶ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’å‰Šé™¤ã™ã‚‹ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¯ present                                     |
| remove     | "state: absent"ã¨ä½µã›ã¦ã€ãƒ›ãƒ¼ãƒ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’å‰Šé™¤ã™ã‚‹ã‹ã©ã†ã‹æŒ‡å®šã™ã‚‹ã€‚no : å‰Šé™¤ã—ãªã„ã€‚yes : å‰Šé™¤ã™ã‚‹                            |
| home       | ãƒ¦ãƒ¼ã‚¶ã®ãƒ›ãƒ¼ãƒ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æŒ‡å®šã™ã‚‹ã€‚                                                                                            |
| group      | ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¿½åŠ ã•ã‚Œã‚‹ã‚°ãƒ«ãƒ¼ãƒ—ã‚’æŒ‡å®šã™ã‚‹ã€‚                                                                                          |
| append     | yes:æŒ‡å®šã•ã‚ŒãŸã‚°ãƒ«ãƒ¼ãƒ—ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’è¿½åŠ ã€‚no:æŒ‡å®šã•ã‚ŒãŸã‚°ãƒ«ãƒ¼ãƒ—ã«ã®ã¿è¿½åŠ ã•ã‚Œ,ä»–ã®ã™ã¹ã¦ã®ã‚°ãƒ«ãƒ¼ãƒ—ã‹ã‚‰ã¯å‰Šé™¤ã•ã‚Œã‚‹ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ no |
| createhome | ãƒ›ãƒ¼ãƒ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒå­˜åœ¨ã—ãªã„å ´åˆã«ä½œæˆã™ã‚‹ã€‚                                                                                    |
| shell      | ãƒ¦ãƒ¼ã‚¶ã®ã‚·ã‚§ãƒ«ã‚’æŒ‡å®šã™ã‚‹                                                                                                          |
| uid        | ãƒ¦ãƒ¼ã‚¶ãƒ¼ ID ã‚’æŒ‡å®š                                                                                                                |

| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿    | æ„å‘³                                                                                                                       |
| ------------- | -------------------------------------------------------------------------------------------------------------------------- |
| name          | â€»å¿…é ˆé …ç›®ã€‚ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å/URL ã‚’æŒ‡å®šã‚’æŒ‡å®šã™ã‚‹ã€‚ã€state=latestã€ã‹ã¤ã€name=\*ã€ã‚’æŒ‡å®šã—ãŸå ´åˆã¯ã€yum -y updateã€ã‚’å®Ÿè¡Œã™ã‚‹ã€‚ |
| state         | present/installed:ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‚latest:æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‚absent/removed:å‰Šé™¤                                   |
| enablerepo    | ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«/æ›´æ–°æ“ä½œã®ãŸã‚ã«æœ‰åŠ¹ã«ã™ã‚‹ãƒªãƒã‚¸ãƒˆãƒªã‚’æŒ‡å®šã™ã‚‹                                                    |
| enable_plugin | ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«/æ›´æ–°æ“ä½œã‚’æœ‰åŠ¹ã«ã™ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³åã‚’æŒ‡å®šã™ã‚‹ã€‚                                                                  |

| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | æ„å‘³                                                                                                                              |
| ---------- | --------------------------------------------------------------------------------------------------------------------------------- |
| name       | â€»å¿…é ˆé …ç›®ã€‚ã‚µãƒ¼ãƒ“ã‚¹ã®åå‰ã‚’æŒ‡å®šã™ã‚‹ã€‚                                                                                             |
| state      | started: ã‚µãƒ¼ãƒ“ã‚¹ã‚’é–‹å§‹ã™ã‚‹ã€‚stopped: ã‚µãƒ¼ãƒ“ã‚¹ã‚’åœæ­¢ã™ã‚‹ã€‚restarted: ã‚µãƒ¼ãƒ“ã‚¹ã‚’å†èµ·å‹•ã™ã‚‹ã€‚reloaded: ã‚µãƒ¼ãƒ“ã‚¹ã‚’å†èª­ã¿è¾¼ã¿ã™ã‚‹     |
| sleep      | ã‚µãƒ¼ãƒ“ã‚¹ã‚’å†èµ·å‹•ã™ã‚‹å ´åˆã«ã€stop ã¨ start ã‚³ãƒãƒ³ãƒ‰ã®é–“ã§æŒ‡å®šæ™‚é–“ã‚¹ãƒªãƒ¼ãƒ—ã—ã¾ã™ã€‚ å‹•ä½œã®æ‚ªã„ init ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å›é¿ã™ã‚‹ã®ã«å½¹ç«‹ã¤ã€‚ |
| enabled    | èµ·å‹•æ™‚ã«ã‚µãƒ¼ãƒ“ã‚¹ã‚’è‡ªå‹•èµ·å‹•ã™ã‚‹ã‹ã©ã†ã‹ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ yesã€‚no ã¯ã—ãªã„                                                             |
| arguments  | ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã®è¿½åŠ ã®å¼•æ•°ã‚’æŒ‡å®šã™ã‚‹ã€‚                                                                                            |

| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | æ„å‘³                                                                                                                 |
| ---------- | -------------------------------------------------------------------------------------------------------------------- |
| path       | â€»å¿…é ˆé …ç›®ã€‚ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’æŒ‡å®šã™ã‚‹ã€‚                                                                                  |
| src        | ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒãƒ¼ãƒ‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’æŒ‡å®šã™ã‚‹(state=link ã®å ´åˆã®ã¿)ã€‚source ã®ç•¥ã€‚                                     |
| dest       | destination ã®ç•¥ã€‚å®›å…ˆã€‚src ã‚’ç½®ãé€ä¿¡å…ˆã§ã‚ã‚‹ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒãƒ¼ãƒ‰ã®çµ¶å¯¾ãƒ‘ã‚¹ã‚’æŒ‡å®šã™ã‚‹ã€‚                                 |
| attributes | ãƒ•ã‚¡ã‚¤ãƒ«ã¾ãŸã¯ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å±æ€§ã‚’æŒ‡å®šã™ã‚‹ã€‚                                                                         |
| group      | ãƒ•ã‚¡ã‚¤ãƒ«/ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æ‰€æœ‰ã™ã‚‹ã‚°ãƒ«ãƒ¼ãƒ—ã‚’æŒ‡å®šã™ã‚‹ã€‚                                                                  |
| mode       | ãƒ•ã‚¡ã‚¤ãƒ«/ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«æ¨©é™ã‚’ä»˜ä¸ã™ã‚‹ã€‚8 é€²æ•°ã®æŒ‡å®š(0644 ã‚„'644')ã¨ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒ¢ãƒ¼ãƒ‰(u=rw,g=r,o=r)ã§ã®æŒ‡å®šãŒå¯èƒ½ã€‚  |
| follow     | æ—¢ã«ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã™ã‚‹å ´åˆç½®ãæ›ãˆãªã„ã€‚(è¦ç¢ºèª)                                                                     |
| force      | ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã‚’ä½œæˆã™ã‚‹ã€‚path ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒªãƒ³ã‚¯ã‚’è§£é™¤ã—ã€ä»£ã‚ã‚Šã« src ã§ãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã‚’ä½œæˆã™ã‚‹ |
| recurse    | å†å¸°çš„ã«ãƒ•ã‚¡ã‚¤ãƒ«å±æ€§ã‚’å¤‰æ›´ã™ã‚‹ã‹(state=directory/state=hard ã®å ´åˆã®ã¿)ã€‚ã€‚                                          |
| state      | **file**                                                                                                             |

: æ—¢å­˜ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ“ä½œã™ã‚‹å ´åˆã«æŒ‡å®šã™ã‚‹ã€‚
**link**
: ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã¨ã—ã¦æŒ‡å®šã™ã‚‹ã€‚
**directory**
: path ã«æŒ‡å®šã•ã‚ŒãŸãƒ‘ã‚¹åã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã™ã‚‹ã€‚ãƒ‘ã‚¹åã®é€”ä¸­ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒå­˜åœ¨ã—ãªã„å ´åˆã¯ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚‚ä¸€ç·’ã«ä½œæˆã™ã‚‹ã€‚
**hard**
: ãƒãƒ¼ãƒ‰ãƒªãƒ³ã‚¯ã¨ã—ã¦æŒ‡å®šã™ã‚‹ã€‚
**touch**
: path ã§æŒ‡å®šã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã—ãªã„å ´åˆã€ç©ºãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹ã€‚æ—¢ã«ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã™ã‚‹å ´åˆã€ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ãŒæ›´æ–°ã•ã‚Œã‚‹ã€‚
**absent**
: ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚„ãƒ•ã‚¡ã‚¤ãƒ«ã€ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã‚’å‰Šé™¤ã™ã‚‹ã€‚ |

| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿     | æ„å‘³                                                                                                                                             |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------ |
| dest           | â€»å¿…é ˆé …ç›®ã€‚ã‚³ãƒ”ãƒ¼å…ˆã®ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒãƒ¼ãƒ‰ã®çµ¶å¯¾ãƒ‘ã‚¹ã€‚src ãŒãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å ´åˆã€ã“ã‚Œã‚‚ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚                                  |
| src            | ã‚³ãƒ”ãƒ¼å…ƒã‚’æŒ‡å®šã™ã‚‹ã€‚                                                                                                                             |
| attributes     | ãƒ•ã‚¡ã‚¤ãƒ«ã®å±æ€§ã‚’æŒ‡å®šã™ã‚‹ã€‚                                                                                                                       |
| backup         | yes ã®å ´åˆã€ä¸Šæ›¸ãã•ã‚Œã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’ä½œæˆã™ã‚‹ã€‚ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¯ã‚³ãƒ”ãƒ¼å…ˆã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¨åŒã˜ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä½œæˆã•ã‚Œã‚‹ã€‚ |
| content        | src ã®ä»£ã‚ã‚Šã«ä½¿ç”¨ã™ã‚‹ã¨ã‚³ãƒ”ãƒ¼å…ˆãƒ•ã‚¡ã‚¤ãƒ«ã«è¨˜è¿°ã™ã‚‹å†…å®¹ã‚’æŒ‡å®šã™ã‚‹ã€‚                                                                               |
| decrypt        | æš—å·åŒ–ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’å¾©å·åŒ–ã™ã‚‹ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ yes                                                                                               |
| directory_mode | ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã™ã‚‹                                                                                                           |
| follow         | yes ã®å ´åˆã€dest ã§æŒ‡å®šã—ãŸå†…å®¹ã«å¾“ã†ã“ã¨ã‚’ç¤ºã™ã€‚æ—¢ã«ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã™ã‚‹å ´åˆç½®ãæ›ãˆãªã„ã€‚(è¦ç¢ºèª)ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ no                                 |
| force          | yes ã‚’æŒ‡å®šã™ã‚Œã°ã€ã‚³ãƒ”ãƒ¼å…ˆã«æ—¢ã«ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã™ã‚‹å ´åˆã€ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­èº«ã‚’æ¯”è¼ƒã—ã¦å·®åˆ†ãŒã‚ã‚‹å ´åˆã¯ã‚³ãƒ”ãƒ¼ã‚’å®Ÿæ–½ã™ã‚‹ã€‚                               |
| group          | ã‚°ãƒ«ãƒ¼ãƒ—åã‚’æŒ‡å®šã™ã‚‹ã€‚                                                                                                                           |
| mode           | chmod ã‚³ãƒãƒ³ãƒ‰ã§è¨­å®šã§ãã‚‹æ¨©é™è¨­å®š                                                                                                               |
| owner          | chown ã‚³ãƒãƒ³ãƒ‰ã§è¨­å®šã§ãã‚‹æ‰€æœ‰è€…ãƒ¦ãƒ¼ã‚¶ã®è¨­å®šã€‚                                                                                                   |
| validate       | æ‰€å®šã®ä½ç½®ã«ã‚³ãƒ”ãƒ¼ã™ã‚‹å‰ã«å®Ÿè¡Œã™ã‚‹æ¤œè¨¼ã‚³ãƒãƒ³ãƒ‰ã€‚æ¤œè¨¼ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®ãƒ‘ã‚¹ã¯ã€ã€Œï¼…sã€ã‚’ä»‹ã—ã¦æ¸¡ã•ã‚Œã¾ã™ã€‚shell ã¯åˆ©ç”¨ã§ããªã„ã€‚                    |
| remote_src     | ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒãƒ¼ãƒ‰å†…ã§ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚³ãƒ”ãƒ¼ yes/no ã§æŒ‡å®šã™ã‚‹ã€‚src/dest ã®ãƒ‘ã‚¹ã¯ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒãƒ¼ãƒ‰ã«ãªã‚‹                                                  |

| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿       | æ„å‘³                                                                                                       |
| ---------------- | ---------------------------------------------------------------------------------------------------------- |
| dest             | ã‚³ãƒ”ãƒ¼å…ˆã®çµ¶å¯¾ãƒ‘ã‚¹ã®æŒ‡å®šã€‚                                                                                 |
| src              | ãƒ­ãƒ¼ã‚«ãƒ«ã«ã‚ã‚‹ Jinja2 ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ãƒ‘ã‚¹ã€‚çµ¶å¯¾ãƒ‘ã‚¹ã€ç›¸å¯¾ãƒ‘ã‚¹ã§ã®æŒ‡å®šãŒå¯èƒ½ã€‚                               |
| group            | chown ã‚³ãƒãƒ³ãƒ‰ã§è¨­å®šã§ãã‚‹æ‰€æœ‰è€…ã‚°ãƒ«ãƒ¼ãƒ—ã®è¨­å®šã€‚                                                           |
| mode             | chmod ã‚³ãƒãƒ³ãƒ‰ã§è¨­å®šã§ãã‚‹æ¨©é™è¨­å®šã€‚8 é€²æ•°ã®æŒ‡å®šã¨ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒ¢ãƒ¼ãƒ‰ã§ã®æŒ‡å®šãŒå¯èƒ½ã€‚                       |
| owner            | chown ã‚³ãƒãƒ³ãƒ‰ã§è¨­å®šã§ãã‚‹æ‰€æœ‰è€…ãƒ¦ãƒ¼ã‚¶ã®è¨­å®šã€‚                                                             |
| validate         | ã‚³ãƒ”ãƒ¼å‰ã«å®Ÿè¡Œã•ã‚Œã‚‹æ¤œè¨¼ã‚³ãƒãƒ³ãƒ‰ã€‚æ¤œè¨¼ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ã¯ã€%sã€ã§æŒ‡å®šã™ã‚‹ã“ã¨ãŒå¯èƒ½ã€‚                     |
| force            | ãƒ»yes â‡’ dest ã®å†…å®¹ã¨ã€å†…å®¹ãŒç•°ãªã‚Œã°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç½®æ›ã€‚ãƒ»no â‡’ ãƒ•ã‚¡ã‚¤ãƒ«ã¯å®›å…ˆãŒå­˜åœ¨ã—ãªã„å ´åˆã«ã®ã¿è»¢é€ã•ã‚Œã‚‹ |
| newline_sequence | ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«ä½¿ç”¨ã™ã‚‹æ”¹è¡Œã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã‚’æŒ‡å®šã™ã‚‹ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯\ n                                  |

<!--}}}-->

- [Please Wait... | Cloudflare](https://linuxize.com/post/how-to-install-go-on-centos-7/)
- read miniapp local env <https://evolany.larksuite.com/docs/docusLE2ZorIU0PaP9leYg9xoEd>
- read db:rdbms, sql <https://evolany.larksuite.com/docs/docusveOLTtbCoWk682cKQui3eb#fvPvyy>
- <https://evolany.larksuite.com/sheets/shtusDee9dRQZATrbTYPzZsugfc>
- maintain <https://evolany.larksuite.com/docs/docusXxPFXCosMC5lt9ZJODphIg#>
- payment <https://evolany.larksuite.com/docs/docusWQjhMPhBXCCyExYoTGgnYe>

### 2021-06-03

æ¨™æº–å…¥åŠ›ãƒ»æ¨™æº–å‡ºåŠ›
æ¨™æº–å…¥åŠ›ãƒ»æ¨™æº–å‡ºåŠ›ã¨ã¯å®Ÿã¯ã“ã®æš—é»™ã®å…¥åŠ›ãƒ»å‡ºåŠ›ã®ã“ã¨ã‚’æŒ‡ã—ã¾ã™ã€‚
ã‚³ãƒãƒ³ãƒ‰/ã‚¢ãƒ—ãƒªå´ã§å…¥åŠ›å…ƒãƒ»å‡ºåŠ›å…ˆã‚’æ˜ç¤ºã™ã‚‹ã“ã¨ãªãä½¿ç”¨ã§ãã‚‹å…¥åŠ›ãƒ»å‡ºåŠ›ã®ã“ã¨ã§ã™ã€‚
ã“ã‚Œã«ã¯ã‚‚ã†å°‘ã—æ·±ã„æ„å‘³ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã“ã¨ã«æ³¨æ„ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ãã‚Œã¯ã€æ¬¡ã®ã‚ˆã†ãªã‚³ãƒãƒ³ãƒ‰/ã‚¢ãƒ—ãƒªé–‹ç™ºè€…ã¨ä½¿ç”¨è€…ã¨ã®é–“ã®ç´„æŸäº‹ã§ã™ã€‚

- ã‚¢ãƒ—ãƒªå´ã§ã¯ã€æ¨™æº–å…¥åŠ›ãƒ»æ¨™æº–å‡ºåŠ›ãŒæš—é»™ã®å…¥åŠ›ãƒ»å‡ºåŠ›ã¨ã—ã¦ä½¿ãˆã‚‹ã“ã¨ã‚’å‰æã¨ã—ã¦è‰¯ã„ã€‚
- æ¨™æº–å…¥åŠ›ãƒ»æ¨™æº–å‡ºåŠ›ãŒã©ã‚“ãªãƒ•ã‚¡ã‚¤ãƒ«ã«çµã³ä»˜ã‘ã‚‰ã‚Œã¦ã„ã‚‹ã‹ã€ã‚¢ãƒ—ãƒªå´ã§æ„è­˜ã™ã‚‹å¿…è¦ã¯ãªã„ã€‚ãã‚Œã¯ã‚¢ãƒ—ãƒªå®Ÿè¡Œè€…ãŒè‰¯ã„ã‚ˆã†ã«ç”¨æ„ã—ã¦ã„ã‚‹ã¯ãšã ã€‚
- ã‚¢ãƒ—ãƒªå®Ÿè¡Œè€…ã«ã¯ã€ãã®ã‚¢ãƒ—ãƒªãŒã©ã®ã‚ˆã†ã«æ¨™æº–å…¥åŠ›ãƒ»æ¨™æº–å‡ºåŠ›ã‚’ä½¿ã†ã‹ã‚’æ„è­˜ã—ã¦ã€äº‹å‰ã«é©åˆ‡ãªå…¥åŠ›å…ƒãƒ»å‡ºåŠ›å…ˆã‚’ç”¨æ„ã™ã‚‹ç¾©å‹™ãŒã‚ã‚‹ã€‚

- å…¥åŠ›ãƒ»å‡ºåŠ›ã¨ã¯ãƒ•ã‚¡ã‚¤ãƒ«ã«å¯¾ã—ã¦èª­ã¿æ›¸ãã™ã‚‹çµŒè·¯ã®ã“ã¨
- æš—é»™ã®ã†ã¡ã«ä½¿ç”¨ã§ãã‚‹å…¥åŠ›ãƒ»å‡ºåŠ›ã¨ã—ã¦ã€æ¨™æº–ã§ 3 ç¨®ã€æ¨™æº–å…¥åŠ›ãƒ»æ¨™æº–å‡ºåŠ›ãƒ»æ¨™æº–ã‚¨ãƒ©ãƒ¼ãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹
  au BufWritePost \*.go silent! :!bash -c "(cd ./infra/cmd; go build .)"

au BufWritePost \*.go silent! :!bash -c "(cd ./infra/cmd; go build .)"

````<!--{{{-->
package main

import (
	"fmt"
	"log"
	"strings"

	"github.com/gdamore/tcell/v2"
	"github.com/gonuts/commander"
	"github.com/gonuts/flag"
	"github.com/rivo/tview"
)

func makeCmdUI() *commander.Command {
	flg := *flag.NewFlagSet("force", flag.ExitOnError)
	app := tview.NewApplication()
	table := tview.NewTable().SetBorders(true)
	var searchInput *tview.InputField
	var footer *tview.TextView
	items, err := getEnvItems()
	if err != nil {
		log.Fatal(err)
	}

	getVarByName := func(vars []Variable, name string) Variable {
		var v Variable
		for _, v = range vars {
			if v.Name == name {
				return v
			}
		}
		return v
	}

	setCell := func(table *tview.Table, row int, column int, value string) {
		align := tview.AlignCenter
		color := tcell.ColorWhite
		if row == 0 {
			color = tcell.ColorRed
		}
		cell := tview.NewTableCell(value).SetAlign(align).SetTextColor(color).SetSelectable(row != 0)
		table.SetCell(row, column, cell)
	}

	drawNewTable := func(selected EnvItem) {
		app := tview.NewApplication()
		form := tview.NewForm().
			AddDropDown("Title", []string{"Mr.", "Ms.", "Mrs.", "Dr.", "Prof."}, 0, nil).
			AddInputField("First name", "", 20, nil, nil).
			AddInputField("Last name", "", 20, nil, nil).
			AddCheckbox("Age 18+", false, nil).
			AddPasswordField("Password", "", 10, '*', nil).
			AddButton("Save", nil).
			AddButton("Quit", func() {
				app.Stop()
			})
		form.SetBorder(true).SetTitle("Enter some data").SetTitleAlign(tview.AlignLeft)
		if err := app.SetRoot(form, true).EnableMouse(true).Run(); err != nil {
			panic(err)
		}
	}

	getSearched := func(str string) []EnvItem {
		var res []EnvItem
		for _, v := range items {
			if v.Name == str {
				res = append(res, v)
			}
		}
		return res
	}

	setInfoTable := func(items []EnvItem) error {
		var err error
		setCell(table, 0, 0, "Env name")
		setCell(table, 0, 1, "Domain")
		setCell(table, 0, 2, "AP count")
		setCell(table, 0, 3, "DB count")
		setCell(table, 0, 4, "DB slave count")
		setCell(table, 0, 5, "Cost")
		for i, v := range items {
			i = i + 1
			setCell(table, i, 0, v.Name)
			setCell(table, i, 1, strings.Join([]string{v.Name, ".*"}, ""))
			apc := getVarByName(v.Vars, "ap_instance_count")
			setCell(table, i, 2, fmt.Sprint(apc.Default))
			setCell(table, i, 3, fmt.Sprint("db"))
			setCell(table, i, 4, fmt.Sprint("db_slave"))
			setCell(table, i, 5, fmt.Sprint(v.Cost))
		}
		table.SetFixed(1, 1).SetDoneFunc(func(key tcell.Key) {
			if key == tcell.KeyCtrlC || key == tcell.KeyEscape {
				app.Stop()
			}
			if key == tcell.KeyEnter {
				table.SetSelectable(true, false)
			}
		}).SetSelectedFunc(func(row int, column int) {
			table.GetCell(row, column).SetTextColor(tcell.ColorRed).SetAlign(tview.AlignCenter)
			table.SetSelectable(false, false)
			row -= 1
			selected := items[row]
			table.Clear()
			drawNewTable(selected)
		})
		return err
	}

	searchInput = tview.NewInputField().
		SetLabel("search env:  ").SetDoneFunc(func(key tcell.Key) {
		text := searchInput.GetText()
		item := getSearched(text)
		setInfoTable(item)
	})
	setFooter := func(msg string) {
		footer = tview.NewTextView().SetText(msg)
	}

	cmdUI := func(cmd *commander.Command, args []string) error {
		var err error
		err = setInfoTable(items)
		if err != nil {
			log.Fatal(err)
		}
		flex := tview.NewFlex()
		setFooter("SELECT: Enter / EXIT: Escape or Ctrl+C")
		flex.SetDirection(tview.FlexRow).AddItem(table, 0, 1, true).AddItem(searchInput, 2, 0, false).AddItem(footer, 1, 0, false)
		if err := app.SetRoot(flex, true).EnableMouse(true).Run(); err != nil {
			log.Fatal(err)
		}
		return err
	}

	return &commander.Command{
		Run:       cmdUI,
		UsageLine: "ui",
		Short:     "ui",
		Flag:      flg,
	}
}

// flex := tview.NewFlex()
// flex.SetDirection(tview.FlexRow). // å„ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã‚’ç¸¦ã«é…ç½®ã™ã‚‹è¨­å®š
// 	AddItem(widget1, 3, 0, true). // widget1ã¯å¸¸ã«3è¡Œå›ºå®šã§è¡¨ç¤ºã™ã‚‹
// 	AddItem(widget2, 0, 1, false). // widget2ã¯æ®‹ã‚Šã®é ˜åŸŸã®1/3ã§è¡¨ç¤ºã™ã‚‹
// 	AddItem(widget3, 0, 2, false) // widget3ã¯æ®‹ã‚Šã®é ˜åŸŸã®2/3ã§è¡¨ç¤ºã™ã‚‹

// grid := tview.NewGrid()
// grid.SetSize(5, 5, 0, 0). // è¡¨ç¤ºé ˜åŸŸã‚’ç¸¦æ¨ªãã‚Œãã‚Œã‚’5ç­‰åˆ†ã—ã€5x5ã®ã‚°ãƒªãƒƒãƒ‰ã‚’ä½œã‚‹
// 	AddItem(widget4, 0, 0, 1, 1, 0, 0, true). //(0,0)ã‹ã‚‰(1,1)ã«widget4ã‚’è¡¨ç¤ºã™ã‚‹
// 	AddItem(widget5, 1, 1, 2, 2, 0, 0, true). //(1,1)ã‹ã‚‰(3,3)ã«widget5ã‚’è¡¨ç¤ºã™ã‚‹
// 	AddItem(widget6, 3, 3, 2, 2, 0, 0, true) //(3,3)ã‹ã‚‰(5,5)ã«widget6ã‚’è¡¨ç¤ºã™ã‚‹

// page := tview.NewPages()
// page.AddPage("page1", flex, true, true). // flexã‚’pageã«è¿½åŠ ã—ã€è¡¨ç¤ºã™ã‚‹
// 	AddPage("page2", grid, true, false) // gridã‚’pageã«è¿½åŠ ã™ã‚‹ãŒã€è¡¨ç¤ºã•ã›ãªã„

```<!--}}}-->
````


### 2021-06-05

- [x] awesome-aws-services/ fix navigation.
- [ ] devops github actions schedule. and awesome-aws-services update.
- [x] centos dotfiles
